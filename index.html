<!DOCTYPE html>
<html data-app="{ mineweeper: new Minesweeper(12, 12) }">
	<head>
		<meta charset="UTF-8" />
		<title>Démineur</title>
		<script src="index.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/ptlc8/anchovy@0.3.3/src/anchovy.js"></script>
		<link rel="stylesheet" href="index.css" />
	</head>
	<body>
		<header>
			<h1>
				<span data-bind="mineweeper.alive ? mineweeper.cleared ? '😍' : '😊' : '😵'" data-update="mineweeper.alive|mineweeper.cleared"></span>
				Démineur
				<span data-bind="mineweeper.alive ? mineweeper.cleared ? '😻' : '😼' : '😿'" data-update="mineweeper.alive|mineweeper.cleared"></span>
			</h1>
		</header>
		<div class="minefield" data-foreach-row="mineweeper.minefield" data-index="y" data-update="mineweeper">
			<div data-foreach-cell="row" data-index="x">
				<img data-bind-src="Minesweeper.images[cell.type]"
					 data-on-click="mineweeper.demine(x, y)"
					 data-on-contextmenu="$event.preventDefault(), mineweeper.flag(x, y)"
					 data-update="cell.type" draggable="false" />
			</div>
		</div>
		<footer>
			<button data-on-click="mineweeper = new Minesweeper(8, 8)">8×8</button>
			<button data-on-click="mineweeper = new Minesweeper(12, 12)">12×12</button>
			<button data-on-click="mineweeper = new Minesweeper(18, 18)">18×18</button>
			<button data-on-click="mineweeper = new Minesweeper(24, 24)">24×24</button>
			<button data-on-click="mineweeper = new Minesweeper(32, 32)">32×32</button>
		</footer>
	</body>
</html>
